/*!
 * mdl-components-ext - Component Extensions for the Material Design Light in CSS, JS and HTML
 * @author    Gabor Ivan <gixx@gixx-web.com>
 * @copyright 2012 - 2016 Gixx-web (http://www.gixx-web.com)
 * @license   http://webhemi.gixx-web.com/license/new-bsd   New BSD License
 * @link      http://www.gixx-web.com
 */
(function(){var a=function a(b){this.element_=b;this.init()};window.MaterialFile=a;a.prototype.CssClasses_={IS_UPGRADED:"is-upgraded",JS_FILE:"mdl-js-file",JS_TEXTFIELD:"mdl-js-textfield",FILE_FLOATING:"mdl-file--floating-label",FILE_LABEL:"mdl-file__label",TEXTFIELD:"mdl-textfield",TEXTFIELD_LABEL:"mdl-textfield__label",TEXTFIELD_FLOATING:"mdl-textfield--floating-label",TEXTFIELD_INPUT:"mdl-textfield__input",BUTTON:"mdl-button",BUTTON_PRIMARY:"mdl-button--primary",BUTTON_ICON:"mdl-button--icon",MATERIAL_ICONS:"material-icons"};a.prototype.multipleFilesSelected_="files are selected";a.prototype.fileID_=null;a.prototype.inputChange_=function(f){f.preventDefault();var e=f.target;var d=this.element_.querySelector("#"+this.fileID_+"FileName");var g=e.files.length;if(!this.element_.classList.contains("is-focused")&&!this.element_.classList.contains("is-dirty")){var b=new Event("focus");d.dispatchEvent(b)}if(g>0&&typeof e.files[0].name!="undefined"){if(g==1){d.setAttribute("value",e.files[0].name)}else{var c=this.element_.hasAttribute("data-placeholder-multiple")?this.element_.getAttribute("data-placeholder-multiple"):this.multipleFilesSelected_;d.setAttribute("value",g+" "+c)}d.parentNode.classList.add("is-dirty")}else{d.setAttribute("value","");d.parentNode.classList.remove("is-dirty")}};a.prototype.init=function(){if(this.element_){var h=this.element_.querySelector("input[type=file]");var d=h.parentNode;this.fileID_=h.getAttribute("id");if(!d.classList.contains(this.CssClasses_.TEXTFIELD)){d.classList.add(this.CssClasses_.TEXTFIELD)}if(!d.classList.contains(this.CssClasses_.JS_TEXTFIELD)){d.classList.add(this.CssClasses_.JS_TEXTFIELD)}if(d.classList.contains(this.CssClasses_.FILE_FLOATING)){d.classList.remove(this.CssClasses_.FILE_FLOATING);d.classList.add(this.CssClasses_.TEXTFIELD_FLOATING)}var e=d.querySelector("label");e.classList.remove(this.CssClasses_.FILE_LABEL);e.classList.add(this.CssClasses_.TEXTFIELD_LABEL);e.setAttribute("for",this.fileID_+"FileName");var g=document.createElement("input");g.setAttribute("type","text");g.setAttribute("id",this.fileID_+"FileName");g.setAttribute("name",this.fileID_+"FileName");g.setAttribute("readonly","readonly");g.classList.add(this.CssClasses_.TEXTFIELD_INPUT);d.insertBefore(g,e);var b=document.createElement("div");b.classList.add(this.CssClasses_.BUTTON);b.classList.add(this.CssClasses_.BUTTON_PRIMARY);b.classList.add(this.CssClasses_.BUTTON_ICON);d.appendChild(b);var f=document.createElement("i");f.classList.add(this.CssClasses_.MATERIAL_ICONS);b.appendChild(f);var i=document.createTextNode("attach_file");f.appendChild(i);var c=h.cloneNode(true);c.classList.remove();b.appendChild(c);h.remove();c.addEventListener("change",this.inputChange_.bind(this));componentHandler.upgradeDom();this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}};componentHandler.register({constructor:a,classAsString:"MaterialFile",cssClass:"mdl-js-file",widget:true})})();